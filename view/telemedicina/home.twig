{% extends "template/template.twig" %}
{% block style %}
    <link rel="stylesheet" href="{{ base_url() }}/css/lib/loading-bar.css">
    <link rel="stylesheet" href="{{ base_url() }}/css/lib/range-chart.css">
    <link rel="stylesheet" href="{{ base_url() }}/css/lib/c3.min.css">
{% endblock %}
{% block content %}
    <div class="ed-item s-100">
        <h2 class="color-white">Teleducación</h2>
    </div>
    <div class="ed-item s-100 l-100 bg-white-transparent text-center color-white fit-content">
        <h3 class="text-center color-white p-v-1em title-home">Número de prestaciones a personas vulnerables</h3>
        <div class="ed-container">
            <div class="ed-item s-100 l-65">
                <canvas id="line"></canvas>
            </div>
            <div class="ed-item s-100 l-35 text-center">
                <h3 class="meta">Meta total</h3>
                <h3 class="meta-numero">1200000</h3>
                <div class="ed-container s-100 m-2em-b">
                    <div class="ed-item s-100 l-50 flex justify-flex-end">
                        <div class="porcentaje">80%</div>
                    </div>
                    <div class="ed-item s-100 l-50 p-relative flex justify-flex-end align-center">
                        <p class="p-absolute">Cumplimiento</p>
                    </div>

                </div>
                <a href="{{ path_for('telemedicina.indicador.1') }}" class="btn deg-yellow">Más información</a>
            </div>
        </div>
        <div class="flex l-cross-center l-justify-center p-v-2em">
            <p style="margin: 0">Fecha ultima actualización: {{ "now"|date("Y-m-d") }}</p>
        </div>
    </div>
    <div class="ed-item s-100 l-50  bg-white-transparent text-center color-white fit-content">
        <h3 class="text-center color-white p-v-1em title-home">Número de localidades con servicios de Telemedicina.</h3>
        <div class="ed-container">
            <div class="ed-item s-100 l-50 flex l-cross-center l-justify-center">
                <h3 class="meta-numero">50</h3>
                <div class="range big" data-max="70" data-valor="50" data-background="#60B044" style="width: 90%" data-label="Meta total"></div>
            </div>
            <div class="ed-item s-100 l-50 text-center">
                <h3 class="meta">Meta total</h3>
                <h3 class="meta-numero">70</h3>
                <div class="ed-container s-100 m-2em-b">
                    <div class="ed-item s-100 l-50 flex justify-flex-end">
                        <div class="porcentaje">75%</div>
                    </div>
                    <div class="ed-item s-100 l-50 p-relative flex justify-flex-end align-center">
                        <p class="p-absolute">Cumplimiento</p>
                    </div>

                </div>
                <a href="{{ path_for('telemedicina.indicador.2') }}" class="btn deg-yellow">Más información</a>
            </div>
        </div>
        <div class="flex l-cross-center l-justify-center p-v-2em">
            <p style="margin: 0">Fecha ultima actualización: {{ created_at | date("Y-m-d") }}</p>
        </div>
    </div>
    <div class="ed-item s-100 l-50 bg-white-transparent color-white text-center fit-content">
        <h3 class="text-center color-white p-v-1em title-home">Número de prestaciones a pacientes de alto costo.</h3>
        <div class="ed-container">
            <div class="ed-item s-100 l-50 flex l-cross-center l-justify-center l-column">
                <h3 class="meta-numero text-left">20000</h3>
                <div class="range big" data-max="36000" data-valor="20000" data-background="#60B044" style="width: 90%" data-label="Meta total"></div>
            </div>
            <div class="ed-item s-100 l-50 text-center">
                <h3 class="meta">Meta total</h3>
                <h3 class="meta-numero">36000</h3>
                <div class="ed-container s-100 m-2em-b">
                    <div class="ed-item s-100 l-50 flex justify-flex-end">
                        <div class="porcentaje">50%</div>
                    </div>
                    <div class="ed-item s-100 l-50 p-relative flex align-center">
                        <p class="p-absolute">Cumplimiento</p>
                    </div>
                </div>
                <a href="{{ path_for('telemedicina.indicador.3') }}" class="btn deg-yellow">Más información</a>
            </div>
        </div>
        <div class="flex l-cross-center l-justify-center p-v-2em">
            <p style="margin: 0">Fecha ultima actualización: {{ "now"|date("Y-m-d") }}</p>
        </div>
    </div>
    <div class="ed-item s-100 l-100 bg-white-transparent color-white text-center fit-content">
        <h3 class="text-center color-white p-v-1em title-home">Número y Porcentaje de pacientes que se declaran satisfechos con el servicio.</h3>
        <div class="ed-container">
            <div class="ed-item s-100 l-50 flex l-cross-center l-justify-center l-column">
                <h3 class="meta-numero text-left">{{ indicador3.total }}</h3>
                <div class="range big" data-max="{{ indicador3.meta }}" data-valor="{{ indicador3.total }}" data-background="#60B044" style="width: 90%" data-label="Meta total"></div>
            </div>
            <div class="ed-item s-100 l-50 text-center">
                <h3 class="meta">Meta total</h3>
                <h3 class="meta-numero">{{ indicador3.meta }}</h3>
                <div class="ed-container s-100 m-2em-b">
                    <div class="ed-item s-100 l-50 flex justify-flex-end">
                        <div class="porcentaje">{{ indicador3.porcentaje < 100 ? indicador3.porcentaje : 100 }}%</div>
                    </div>
                    <div class="ed-item s-100 l-50 p-relative flex align-center">
                        <p class="p-absolute">Cumplimiento</p>
                    </div>
                </div>
                <a href="" class="btn deg-yellow">Más información</a>
            </div>
        </div>
        <div class="flex l-cross-center l-justify-center p-v-2em">
            <p style="margin: 0">Fecha ultima actualización: {{ "now"|date("Y-m-d") }}</p>
        </div>
    </div>
{% endblock %}
{% block javascript %}
<script src="{{ base_url() }}/js/lib/loading-bar.js"></script>
<script src="{{ base_url() }}/js/lib/range-chart.js"></script>
<script src="{{ base_url() }}/js/lib/d3-5.8.2.min.js"></script>
<script src="{{ base_url() }}/js/lib/c3.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>

<script>

    var ctx = document.getElementById('line').getContext('2d');

    var myLineChart = new Chart(ctx, {
    type: 'line',
    data: {
        labels : [
            'Febrero 2018', 'Marzo 2018', 'Julio 2018', 'Agosto 2018', 'Septiembre 2018', 'Octubre 2018', 'Noviembre 2018', 'Enero 2019'
        ],
         datasets: [{
            label: 'Número de profesionales capacitados',
            borderColor: 'rgb(255, 99, 132)',
            data: [
                150, 20, 30, 45, 180, 90, 200, 160
            ],
            backgroundColor : "#CCC"
        }]
    },
    options : {
        legend : {
            labels: {
                fontColor: '#FFF'
            }
        },
        scales : {
            yAxes : [{
                ticks : {
                    fontColor: 'white'
                }
            }],
            xAxes : [{
                ticks : {
                    fontColor: 'white'
                }
            }]
        }
    }

});
</script>
<script >
var chart = c3.generate({
    data: {
        columns: [
            ['Número de nuevos algoritmos', {{ indicador1.total }}]
        ],
        type: 'gauge',
    },
    gauge: {
        max: {{ indicador1.meta }},
        label: {
           format: function(value, ratio) {
                return value;
            },
            show: false // to turn off the min/max labels.
       },
    },
    color: {
        pattern: ['#FF0000', '#F97600', '#F6C600', '#60B044'], // the three color levels for the percentage values.
        threshold: {
//            unit: 'value', // percentage is default
//            max: 200, // 100 is default
            values: [3, 5, 10, 15],
        }
    },
    axis : {
      y : {
          show : false
      }
    },
    size: {
        height: 180
    },
    tooltip : {
        contents : function(d) {
            return "<div>"+d[0].value+"</div>";
        }
    }
});
</script>
{% endblock %}