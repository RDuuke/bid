{% extends "template/template.twig" %}
{% block style %}
    <link rel="stylesheet" href="{{ base_url() }}/css/lib/loading-bar.css">
    <link rel="stylesheet" href="{{ base_url() }}/css/lib/range-chart.css">
    <link rel="stylesheet" href="{{ base_url() }}/css/lib/c3.min.css">
{% endblock %}
{% block content %}
    <div class="ed-item s-100 title-indicador">
        <h2 class="color-white">Telemedicina</h2>
    </div>
    <div class="ed-item s-100 l-50 bg-white-transparent text-center color-white fit-content p-relative">
        <h3 class="text-center color-white p-v-1em title-home">Número de prestaciones a personas vulnerables</h3>
        <div class="ed-container">
            <div class="ed-item s-100 l-50 telemedicina">
                <div id="chart"></div>
            </div>
            <div class="ed-item s-100 l-50 text-center">
                <h3 class="meta">Meta total</h3>
                <h3 class="meta-numero">{{ indicador1.meta }}</h3>
                <div class="ed-container s-100 m-2em-b">
                    <div class="ed-item s-100 l-70 flex justify-flex-end">
                        <div class="ldBar label-center" data-preset="circle"
                             data-value="{{ indicador1.porcentaje }}"
                             style="width:100%;height:100%"
                             data-stroke-width="10"
                             data-stroke="#FCE61D"
                             data-stroke-trail="#F01246"
                             data-stroke-trail-width="15"
                        ></div>                    </div>
                    <div class="ed-item s-100 l-30 p-relative flex justify-flex-end align-center">
                        <p class="p-absolute" style="margin-left: 10px">Cumplimiento</p>
                    </div>

                </div>
                <a href="{{ path_for('telemedicina.indicador.1') }}" class="btn deg-yellow p-absolute home">Más información</a>
            </div>
        </div>
        <div class="flex l-cross-center p-v-1em">
            <p style="margin: 0;padding-left: 15px">Fecha ultima actualización: {{ "now"|date("Y-m-d") }}</p>
        </div>
    </div>
    <div class="ed-item s-100 l-50  bg-white-transparent text-center color-white fit-content p-relative">
        <h3 class="text-center color-white p-v-1em title-home">Número de localidades con servicios de Telemedicina.</h3>
        <div class="ed-container">
            <div class="ed-item s-100 l-50 flex l-cross-center l-justify-center">
                <h3 class="meta-numero">{{ indicador2.total }}</h3>
                <div class="range big" data-max="{{ indicador2.meta }}" data-valor="{{ indicador2.total }}" data-background="#ED1A4A" style="width: 90%" data-label="Meta total"></div>
            </div>
            <div class="ed-item s-100 l-50 text-center">
                <h3 class="meta">Meta total</h3>
                <h3 class="meta-numero">{{ indicador2.meta }}</h3>
                <div class="ed-container s-100 m-2em-b">
                    <div class="ed-item s-100 l-70 flex justify-flex-end">
                        <div class="ldBar label-center" data-preset="circle"
                             data-value="{{ indicador2.porcentaje }}"
                             style="width:100%;height:100%"
                             data-stroke-width="10"
                             data-stroke="#FCE61D"
                             data-stroke-trail="#F01246"
                             data-stroke-trail-width="15"
                        ></div>
                    </div>
                    <div class="ed-item s-100 l-30 p-relative flex justify-flex-end align-center">
                        <p class="p-absolute" style="margin-left: 10px">Cumplimiento</p>
                    </div>

                </div>
                <a href="{{ path_for('telemedicina.indicador.2') }}" class="btn deg-yellow p-absolute home">Más información</a>
            </div>
        </div>
        <div class="flex l-cross-center p-v-1em">
            <p style="margin: 0;padding-left: 15px">Fecha ultima actualización: {{ "now"|date("Y-m-d") }}</p>
        </div>
    </div>
    <div class="ed-item s-100 l-50 bg-white-transparent color-white text-center fit-content p-relative">
        <h3 class="text-center color-white p-v-1em title-home">Número de prestaciones a pacientes de alto costo.</h3>
        <div class="ed-container">
            <div class="ed-item s-100 l-50 flex l-cross-center l-justify-center l-column">
                <h3 class="meta-numero text-left">{{ indicador3.total }}</h3>
                <div class="range big" data-max="{{ indicador3.meta }}" data-valor="{{ indicador3.total }}" data-background="#ED1A4A" style="width: 90%" data-label="Meta total"></div>
            </div>
            <div class="ed-item s-100 l-50 text-center">
                <h3 class="meta">Meta total</h3>
                <h3 class="meta-numero">{{ indicador3.meta }}</h3>
                <div class="ed-container s-100 m-2em-b">
                    <div class="ed-item s-100 l-70 flex justify-flex-end">
                        <div class="ldBar label-center" data-preset="circle"
                             data-value="{{ indicador3.porcentaje }}"
                             style="width:100%;height:100%"
                             data-stroke-width="10"
                             data-stroke="#FCE61D"
                             data-stroke-trail="#F01246"
                             data-stroke-trail-width="15"
                        ></div>                    </div>
                    <div class="ed-item s-100 l-30 p-relative flex justify-flex-end align-center">
                        <p class="p-absolute" style="margin-left: 10px">Cumplimiento</p>
                    </div>
                </div>
                <a href="{{ path_for('telemedicina.indicador.3') }}" class="btn deg-yellow p-absolute home">Más información</a>
            </div>
        </div>
        <div class="flex l-cross-center p-v-1em">
            <p style="margin: 0;padding-left: 15px">Fecha ultima actualización: {{ "now"|date("Y-m-d") }}</p>
        </div>
    </div>
    <div class="ed-item s-100 l-50 bg-white-transparent color-white text-center fit-content p-relative">
        <h3 class="text-center color-white p-v-1em title-home">Número y Porcentaje de pacientes que se declaran satisfechos con el servicio.</h3>
        <div class="ed-container">
            <div class="ed-item s-100 l-50 flex l-cross-center l-justify-center l-column">
                <h3 class="meta-numero text-left">{{ indicador3.total }}</h3>
                <div class="range big" data-max="0" data-valor="0" data-background="#ED1A4A" style="width: 90%" data-label="Meta total"></div>
            </div>
            <div class="ed-item s-100 l-50 text-center">
                <h3 class="meta">Meta total</h3>
                <h3 class="meta-numero"></h3>
                <div class="ed-container s-100 m-2em-b">
                    <div class="ed-item s-100 l-70 flex justify-flex-end">
                        <div class="ldBar label-center" data-preset="circle"
                             data-value="{{ indicador3.porcentaje }}"
                             style="width:100%;height:100%"
                             data-stroke-width="10"
                             data-stroke="#FCE61D"
                             data-stroke-trail="#F01246"
                             data-stroke-trail-width="15"
                        ></div>
                    </div>
                    <div class="ed-item s-100 l-30 p-relative flex justify-flex-end align-center">
                        <p class="p-absolute" style="margin-left: 10px">Cumplimiento</p>
                    </div>
                </div>
                <a href="" class="btn deg-yellow p-absolute home">Más información</a>
            </div>
        </div>
        <div class="flex l-cross-center p-v-1em">
            <p style="margin: 0;padding-left: 15px">Fecha ultima actualización: {{ "now"|date("Y-m-d") }}</p>
        </div>
    </div>
{% endblock %}
{% block javascript %}
<script src="{{ base_url() }}/js/lib/loading-bar.js"></script>
<script src="{{ base_url() }}/js/lib/range-chart.js"></script>
<script src="{{ base_url() }}/js/lib/d3-5.8.2.min.js"></script>
<script src="{{ base_url() }}/js/lib/c3.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
<script>
var chart = c3.generate({
    data: {
        columns: [
            ['Número de prestaciones a personas vulnerables ', {{ indicador1.total }}]
        ],
        type: 'gauge',
    },
    gauge: {
        max: {{ indicador1.meta }},
        label: {
           format: function(value, ratio) {
                return value;
            },
            show: false,
            color: "#ED1A4A"
        },
    },
    size: {
        height: 250
    },
    color: {
        pattern: ['#FF0000', '#F97600', '#F6C600', '#60B044'], // the three color levels for the percentage values.
        threshold: {
//            unit: 'value', // percentage is default
//            max: 200, // 100 is default
            values: [48000, 72000, 96000, 120000],
        }
    },
    axis : {
      y : {
          show : false
      }
    },
    tooltip : {
        contents : function(d) {
            return "<div>"+d[0].value+"</div>";
        }
    }
});
</script>
{% endblock %}